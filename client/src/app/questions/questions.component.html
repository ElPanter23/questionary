<div class="card">
  <h2 class="text-center mb-4">‚ùì {{ i18nService.getTranslation('manageQuestions') }}</h2>
  
  <!-- Neue Frage hinzuf√ºgen -->
  <div class="mb-4">
    <h3>{{ i18nService.getTranslation('addNewQuestion') }}</h3>
    <form (ngSubmit)="addQuestion()" #questionForm="ngForm">
      <div class="form-group">
        <label class="form-label" for="text">{{ i18nService.getTranslation('questionText') }} *</label>
        <textarea 
          id="text" 
          name="text" 
          class="form-control textarea" 
          [(ngModel)]="newQuestion.text" 
          required
          [placeholder]="i18nService.getTranslation('placeholderQuestionText')"></textarea>
      </div>
      
      <div class="grid grid-2">
        <div class="form-group">
          <label class="form-label" for="category">{{ i18nService.getTranslation('category') }}</label>
          <input 
            type="text" 
            id="category" 
            name="category" 
            class="form-control" 
            [(ngModel)]="newQuestion.category"
            [placeholder]="i18nService.getTranslation('placeholderCategory')">
        </div>
        
        <div class="form-group">
          <label class="form-label" for="difficulty">{{ i18nService.getTranslation('seasonLevel') }}</label>
          <input 
            type="number" 
            id="difficulty" 
            name="difficulty" 
            class="form-control" 
            [(ngModel)]="newQuestion.difficulty"
            min="1" 
            max="4"
            [placeholder]="i18nService.getTranslation('placeholderSeason')">
        </div>
      </div>
      
      <button type="submit" class="btn" [disabled]="!questionForm.form.valid || loading">
        {{ loading ? i18nService.getTranslation('addingQuestion') : i18nService.getTranslation('addQuestion') }}
      </button>
    </form>
  </div>

  <!-- Bulk Import -->
  <div class="card mb-4">
    <h3>üì• {{ i18nService.getTranslation('importMultipleQuestions') }}</h3>
    <p>{{ i18nService.getTranslation('addMultipleQuestions') }}</p>
    <form (ngSubmit)="importQuestions()" #importForm="ngForm">
      <div class="form-group">
        <label class="form-label" for="bulkText">{{ i18nService.getTranslation('questionsOnePerLine') }}</label>
        <textarea 
          id="bulkText" 
          name="bulkText" 
          class="form-control textarea" 
          [(ngModel)]="bulkImportText" 
          required
          [placeholder]="i18nService.getTranslation('placeholderMultipleQuestions')"></textarea>
      </div>
      
      <div class="form-group">
        <label class="form-label" for="bulkCategory">{{ i18nService.getTranslation('standardCategory') }}</label>
        <input 
          type="text" 
          id="bulkCategory" 
          name="bulkCategory" 
          class="form-control" 
          [(ngModel)]="bulkCategory"
          [placeholder]="i18nService.getTranslation('placeholderCustomCategory')">
      </div>
      
      <button type="submit" class="btn" [disabled]="!importForm.form.valid || loading">
        {{ loading ? i18nService.getTranslation('importing') : i18nService.getTranslation('importQuestions') }}
      </button>
    </form>
  </div>

  <!-- Web Scraping -->
  <div class="card mb-4">
    <h3>üåê {{ i18nService.getTranslation('importFromWeb') }}</h3>
    
    <!-- 100-fragen.de Scraping -->
    <div class="mb-4">
      <h4>{{ i18nService.getTranslation('importFrom100Fragen') }}</h4>
      <div class="grid grid-2">
        <div class="form-group">
          <label class="form-label" for="scrapingCategory">{{ i18nService.getTranslation('selectCategory') }}</label>
          <select id="scrapingCategory" class="form-control" [(ngModel)]="selectedScrapingCategory">
            <option *ngFor="let category of scrapingCategories" [value]="category.key">
              {{ category.name }} - {{ category.description }}
            </option>
          </select>
        </div>
        <div class="form-group">
          <button class="btn" (click)="scrapeFrom100Fragen()" [disabled]="scraping">
            {{ scraping ? i18nService.getTranslation('importing') : i18nService.getTranslation('importFrom100FragenButton') }}
          </button>
        </div>
      </div>
    </div>

    <!-- Custom URL Scraping -->
    <div>
      <h4>{{ i18nService.getTranslation('importFromCustomUrl') }}</h4>
      <form (ngSubmit)="scrapeFromCustomUrl()" #customForm="ngForm">
        <div class="form-group">
          <label class="form-label" for="customUrl">{{ i18nService.getTranslation('url') }}</label>
          <input 
            type="url" 
            id="customUrl" 
            name="customUrl" 
            class="form-control" 
            [(ngModel)]="customUrl" 
            required
            [placeholder]="i18nService.getTranslation('placeholderUrl')">
        </div>
        
        <div class="grid grid-2">
          <div class="form-group">
            <label class="form-label" for="customCategory">{{ i18nService.getTranslation('customCategory') }}</label>
            <input 
              type="text" 
              id="customCategory" 
              name="customCategory" 
              class="form-control" 
              [(ngModel)]="customCategory"
              [placeholder]="i18nService.getTranslation('placeholderCustomCategory')">
          </div>
          
          <div class="form-group">
            <label class="form-label" for="customDifficulty">{{ i18nService.getTranslation('customSeason') }}</label>
            <input 
              type="number" 
              id="customDifficulty" 
              name="customDifficulty" 
              class="form-control" 
              [(ngModel)]="customDifficulty"
              min="1" 
              max="4">
          </div>
        </div>
        
        <button type="submit" class="btn" [disabled]="!customForm.form.valid || scraping">
          {{ scraping ? i18nService.getTranslation('importing') : i18nService.getTranslation('importFromUrlButton') }}
        </button>
      </form>
    </div>
  </div>

  <!-- Fragen-Liste -->
  <div>
    <div class="mb-4">
      <h3>{{ i18nService.getTranslation('existingQuestions') }} ({{ questions.length }})</h3>
      <div class="grid grid-2">
        <div>
          <label class="form-label" for="filterCategory">{{ i18nService.getTranslation('filterByCategory') }}</label>
          <select id="filterCategory" class="form-control" [(ngModel)]="filterCategory" (ngModelChange)="filterQuestions()">
            <option value="">{{ i18nService.getTranslation('allCategories') }}</option>
            <option *ngFor="let category of categories" [value]="category">{{ category }}</option>
          </select>
        </div>
        <div>
          <label class="form-label" for="searchText">{{ i18nService.getTranslation('search') }}</label>
          <input 
            type="text" 
            id="searchText" 
            class="form-control" 
            [(ngModel)]="searchText" 
            (ngModelChange)="filterQuestions()"
            [placeholder]="i18nService.getTranslation('searchQuestionText')">
        </div>
      </div>
    </div>
    
    <div *ngIf="filteredQuestions.length === 0" class="text-center">
      <p *ngIf="questions.length === 0">{{ i18nService.getTranslation('noQuestionsYet') }}</p>
      <p *ngIf="questions.length > 0">{{ i18nService.getTranslation('noQuestionsMatchFilter') }}</p>
    </div>
    
    <div class="grid grid-2" *ngIf="filteredQuestions.length > 0">
      <div *ngFor="let question of filteredQuestions" class="card">
        <h4>{{ question.text }}</h4>
        <div class="mt-2">
          <span *ngIf="question.category" class="status-badge">{{ question.category }}</span>
          <span *ngIf="question.difficulty" class="status-badge status-badge-margin">
            {{ i18nService.getTranslation('seasonLevelLabel') }} {{ question.difficulty }}
          </span>
        </div>
        <div class="mt-4">
          <button class="btn btn-danger" (click)="deleteQuestion(question.id)">
            üóëÔ∏è {{ i18nService.getTranslation('delete') }}
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Lade-Status -->
  <div *ngIf="loading" class="loading">
    <p>{{ i18nService.getTranslation('loading') }}</p>
  </div>

  <!-- Fehler -->
  <div *ngIf="error" class="error">
    {{ error }}
  </div>

  <!-- Erfolg -->
  <div *ngIf="successMessage" class="success">
    {{ successMessage }}
  </div>
</div>
